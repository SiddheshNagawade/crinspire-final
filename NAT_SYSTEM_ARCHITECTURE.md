# NAT Range Validation - System Architecture

## üèóÔ∏è System Architecture Diagram

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      ADMIN PANEL                                 ‚îÇ
‚îÇ  (Admin creates NAT question with answer format)                ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  Answer Options:                                                ‚îÇ
‚îÇ  ‚Ä¢ Exact: "42"                                                  ‚îÇ
‚îÇ  ‚Ä¢ Range: "109.9-112.4"                                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                 ‚îÇ
                 ‚Üì
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ   Supabase     ‚îÇ
        ‚îÇ    Database    ‚îÇ
        ‚îÇ                ‚îÇ
        ‚îÇ  papers        ‚îÇ
        ‚îÇ  sections      ‚îÇ
        ‚îÇ  questions     ‚îÇ
        ‚îÇ    ‚Üì           ‚îÇ
        ‚îÇ  correct_      ‚îÇ
        ‚îÇ  answer: ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ‚îÄ‚îÄ‚Üí "109.9-112.4" or "42"
        ‚îÇ    (stored)    ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                 ‚îÇ
                 ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   STUDENT EXAM INTERFACE                        ‚îÇ
‚îÇ  (Student takes exam and enters numerical answer)              ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  Student enters: "111"                                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                 ‚îÇ
                 ‚Üì
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ   Store in responses   ‚îÇ
        ‚îÇ   responses[qId] = "111"
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
                        ‚Üì
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ    Student clicks SUBMIT         ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
                        ‚Üì
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ   VALIDATION & SCORING (App.tsx)        ‚îÇ
    ‚îÇ                                          ‚îÇ
    ‚îÇ  For each question:                     ‚îÇ
    ‚îÇ  1. Get student answer: "111"           ‚îÇ
    ‚îÇ  2. Get correct answer: "109.9-112.4"  ‚îÇ
    ‚îÇ  3. Call isNATAnswerCorrect()           ‚îÇ
    ‚îÇ     ‚Üì                                   ‚îÇ
    ‚îÇ     Check: 111 >= 109.9 && 111 <= 112.4‚îÇ
    ‚îÇ     ‚Üì                                   ‚îÇ
    ‚îÇ     Return: true ‚úÖ                     ‚îÇ
    ‚îÇ  4. Add marks to score                  ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                 ‚îÇ
                 ‚Üì
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ   STORE SUBMISSION RECORD             ‚îÇ
    ‚îÇ   (Also in ResultScreen.tsx)            ‚îÇ
    ‚îÇ                                         ‚îÇ
    ‚îÇ   exam_submissions.student_answers:    ‚îÇ
    ‚îÇ   {                                    ‚îÇ
    ‚îÇ     question_id: "q1",                ‚îÇ
    ‚îÇ     selected_value: "111",            ‚îÇ
    ‚îÇ     correct_value: "109.9-112.4",    ‚îÇ
    ‚îÇ     is_correct: true,                 ‚îÇ
    ‚îÇ     marks_earned: 4                   ‚îÇ
    ‚îÇ   }                                    ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                 ‚îÇ
                 ‚Üì
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ     RESULTS SCREEN (ResultScreen.tsx)  ‚îÇ
    ‚îÇ                                         ‚îÇ
    ‚îÇ  Re-validates using same logic         ‚îÇ
    ‚îÇ  Updates category analysis             ‚îÇ
    ‚îÇ  Shows final score                     ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                 ‚îÇ
                 ‚Üì
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ     EXAM REVIEW (ExamReview.tsx)       ‚îÇ
    ‚îÇ                                         ‚îÇ
    ‚îÇ  Displays:                             ‚îÇ
    ‚îÇ  Your Answer: 111                      ‚îÇ
    ‚îÇ  Correct: 109.9 - 112.4               ‚îÇ
    ‚îÇ  (Accepted range: 109.9 to 112.4)     ‚îÇ
    ‚îÇ  ‚úÖ Correct                            ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìä Validation Flow Diagram

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   isNATAnswerCorrect()              ‚îÇ
‚îÇ   (Main validation function)         ‚îÇ
‚îÇ                                      ‚îÇ
‚îÇ   Input:                            ‚îÇ
‚îÇ   ‚Ä¢ studentAnswer: "111"            ‚îÇ
‚îÇ   ‚Ä¢ correctAnswer: "109.9-112.4"   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îÇ
             ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   parseNATAnswer(correctAnswer)            ‚îÇ
‚îÇ   Parse: "109.9-112.4"                     ‚îÇ
‚îÇ                                            ‚îÇ
‚îÇ   1. Trim: "109.9-112.4"                   ‚îÇ
‚îÇ   2. Check for "-": YES                    ‚îÇ
‚îÇ   3. Split by "-": ["109.9", "112.4"]     ‚îÇ
‚îÇ   4. Parse floats: [109.9, 112.4]         ‚îÇ
‚îÇ   5. Validate: 109.9 ‚â§ 112.4? YES         ‚îÇ
‚îÇ                                            ‚îÇ
‚îÇ   Return:                                  ‚îÇ
‚îÇ   {                                        ‚îÇ
‚îÇ     isRange: true,                         ‚îÇ
‚îÇ     min: 109.9,                            ‚îÇ
‚îÇ     max: 112.4                             ‚îÇ
‚îÇ   }                                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îÇ
             ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   parseNATAnswer(studentAnswer)            ‚îÇ
‚îÇ   Parse: "111"                             ‚îÇ
‚îÇ                                            ‚îÇ
‚îÇ   1. Trim: "111"                           ‚îÇ
‚îÇ   2. Check for "-": NO                     ‚îÇ
‚îÇ   3. Parse float: 111                      ‚îÇ
‚îÇ   4. Not NaN: YES                          ‚îÇ
‚îÇ                                            ‚îÇ
‚îÇ   Return:                                  ‚îÇ
‚îÇ   {                                        ‚îÇ
‚îÇ     isRange: false,                        ‚îÇ
‚îÇ     min: 111,                              ‚îÇ
‚îÇ     max: 111,                              ‚îÇ
‚îÇ     value: 111                             ‚îÇ
‚îÇ   }                                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îÇ
             ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Range Check                              ‚îÇ
‚îÇ                                            ‚îÇ
‚îÇ   studentValue = 111                       ‚îÇ
‚îÇ   Check: 111 >= 109.9 && 111 <= 112.4    ‚îÇ
‚îÇ          true  &&  true                    ‚îÇ
‚îÇ                                            ‚îÇ
‚îÇ   Result: ‚úÖ TRUE (Correct)               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îÇ
             ‚Üì
    Return: true ‚Üí Mark as Correct ‚Üí Add 4 marks
```

---

## üîÑ Answer Format Detection

```
User Input String
         ‚îÇ
         ‚Üì
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ Trim whitespace ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îÇ
             ‚Üì
      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
      ‚îÇ Contains "-"?‚îÇ
      ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚îÇ     ‚îÇ
         YES   NO
          ‚îÇ     ‚îÇ
          ‚Üì     ‚Üì
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇTry Range‚îÇ ‚îÇTry Single Number ‚îÇ
    ‚îÇ Parsing ‚îÇ ‚îÇ    Parsing       ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ               ‚îÇ
         ‚Üì               ‚Üì
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇSplit by "-"     ‚îÇ ‚îÇparseFloat(input) ‚îÇ
    ‚îÇGet 2 parts?     ‚îÇ ‚îÇIs valid number?  ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                       ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇYES  NO  ‚îÇ            ‚îÇYES  NO  ‚îÇ
    ‚Üì    ‚Üì    ‚Üì            ‚Üì    ‚Üì    ‚Üì
  Range Inv  Invalid     Single Invalid
          Error         Value  Error
```

---

## üéØ Validation Decision Tree

```
                    Is Answer Attempted?
                           ‚îÇ
                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
               NO                    YES
                ‚îÇ                     ‚îÇ
                ‚Üì                     ‚Üì
    [Mark Unanswered]    What is Question Type?
                          ‚îÇ
                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                ‚îÇ         ‚îÇ         ‚îÇ
               NAT       MCQ       MSQ
                ‚îÇ         ‚îÇ         ‚îÇ
                ‚Üì         ‚Üì         ‚Üì
        [Use Range   [Exact Match] [Array Match]
         Validation]


    NAT Range Validation Path:
    ‚îÇ
    ‚îú‚îÄ Is correctAnswer a range? (e.g., "109.9-112.4")
    ‚îÇ  ‚îÇ
    ‚îÇ  ‚îú‚îÄ YES: Extract min=109.9, max=112.4
    ‚îÇ  ‚îÇ       Check: studentValue >= 109.9 AND <= 112.4?
    ‚îÇ  ‚îÇ
    ‚îÇ  ‚îî‚îÄ NO: Parse as single value
    ‚îÇ         Check: studentValue == correctValue?
    ‚îÇ
    ‚Üì
    Return: true (correct) or false (incorrect)
```

---

## üìà Data Flow Through Components

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        App.tsx                               ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  calculateScore() {                                         ‚îÇ
‚îÇ    for each question:                                       ‚îÇ
‚îÇ      if (type === NAT) {                                    ‚îÇ
‚îÇ        isCorrect = isNATAnswerCorrect(               ‚Üê‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ          userAnswer,                                    ‚îÇ  ‚îÇ
‚îÇ          correctAnswer                                 ‚îÇ  ‚îÇ
‚îÇ        )                                               ‚îÇ  ‚îÇ
‚îÇ      }                                                 ‚îÇ  ‚îÇ
‚îÇ  }                                                     ‚îÇ  ‚îÇ
‚îÇ                                                    ‚îå‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îê
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§          ‚îÇ
                                                     ‚îÇ          ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  utils/  ‚îÇ
‚îÇ                 ResultScreen.tsx                   ‚îÇ  natVal  ‚îÇ
‚îÇ                                                    ‚îÇ  idation ‚îÇ
‚îÇ  calculateScores() {                              ‚îÇ  .ts     ‚îÇ
‚îÇ    for each question:                             ‚îÇ          ‚îÇ
‚îÇ      if (type === NAT) {                          ‚îÇ  ‚Ä¢ parse ‚îÇ
‚îÇ        isCorrect = isNATAnswerCorrect(         ‚Üê‚îÄ‚îÄ‚î§    NAT  ‚îÇ
‚îÇ          userAnswer,                             ‚îÇ  Answer  ‚îÇ
‚îÇ          correctAnswer                           ‚îÇ          ‚îÇ
‚îÇ        )                                          ‚îÇ  ‚Ä¢ check ‚îÇ
‚îÇ      }                                            ‚îÇ    range ‚îÇ
‚îÇ  }                                                ‚îÇ          ‚îÇ
‚îÇ                                                    ‚îÇ  ‚Ä¢ format‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§    for  ‚îÇ
                                                     ‚îÇ  display‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§          ‚îÇ
‚îÇ                 ExamReview.tsx                     ‚îÇ          ‚îÇ
‚îÇ                                                    ‚îÇ          ‚îÇ
‚îÇ  Display NAT Answer:                              ‚îÇ          ‚îÇ
‚îÇ    formatNATAnswer(         ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§          ‚îÇ
‚îÇ      correctAnswer                                ‚îÇ          ‚îÇ
‚îÇ    )                                              ‚îÇ          ‚îÇ
‚îÇ    getNATAnswerRangeDisplay(  ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§          ‚îÇ
‚îÇ      correctAnswer                                ‚îÇ          ‚îÇ
‚îÇ    )                                              ‚îÇ          ‚îÇ
‚îÇ                                                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîê Error Handling Flow

```
parseNATAnswer(input)
      ‚îÇ
      ‚îú‚îÄ Input is null/undefined? ‚Üí return null
      ‚îÇ
      ‚îú‚îÄ Trim whitespace
      ‚îÇ
      ‚îú‚îÄ Contains "-"?
      ‚îÇ  ‚îÇ
      ‚îÇ  ‚îú‚îÄ NO: Try parsing as single number
      ‚îÇ  ‚îÇ      ‚îÇ
      ‚îÇ  ‚îÇ      ‚îú‚îÄ Success: return { isRange: false, ... }
      ‚îÇ  ‚îÇ      ‚îî‚îÄ Fail: return null
      ‚îÇ  ‚îÇ
      ‚îÇ  ‚îî‚îÄ YES: Split by "-"
      ‚îÇ         ‚îÇ
      ‚îÇ         ‚îú‚îÄ Get exactly 2 parts?
      ‚îÇ         ‚îÇ  ‚îÇ
      ‚îÇ         ‚îÇ  ‚îú‚îÄ NO: return null
      ‚îÇ         ‚îÇ  ‚îÇ
      ‚îÇ         ‚îÇ  ‚îî‚îÄ YES: Parse both as floats
      ‚îÇ         ‚îÇ          ‚îÇ
      ‚îÇ         ‚îÇ          ‚îú‚îÄ Both valid numbers?
      ‚îÇ         ‚îÇ          ‚îÇ  ‚îÇ
      ‚îÇ         ‚îÇ          ‚îÇ  ‚îú‚îÄ NO: return null
      ‚îÇ         ‚îÇ          ‚îÇ  ‚îÇ
      ‚îÇ         ‚îÇ          ‚îÇ  ‚îî‚îÄ YES: min <= max?
      ‚îÇ         ‚îÇ          ‚îÇ          ‚îÇ
      ‚îÇ         ‚îÇ          ‚îÇ          ‚îú‚îÄ NO: return null
      ‚îÇ         ‚îÇ          ‚îÇ          ‚îÇ
      ‚îÇ         ‚îÇ          ‚îÇ          ‚îî‚îÄ YES: return { isRange: true, ... }
      ‚îÇ         ‚îÇ          ‚îÇ
      ‚îÇ         ‚îÇ          ‚îî‚îÄ NaN check
      ‚îÇ         ‚îÇ
      ‚îÇ         ‚îî‚îÄ Invalid format: return null
      ‚îÇ
      ‚îî‚îÄ Final check: return null if all failed
```

---

## üíæ Database Storage

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         questions table                ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  id  ‚îÇ  text  ‚îÇ type ‚îÇ correct_answer ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ q1   ‚îÇ "Q1"   ‚îÇ NAT  ‚îÇ "42"           ‚îÇ
‚îÇ q2   ‚îÇ "Q2"   ‚îÇ NAT  ‚îÇ "109.9-112.4" ‚îÇ ‚Üê‚îÄ Range stored as string
‚îÇ q3   ‚îÇ "Q3"   ‚îÇ MCQ  ‚îÇ "A"            ‚îÇ
‚îÇ q4   ‚îÇ "Q4"   ‚îÇ MSQ  ‚îÇ "['A','C']"   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚Üì
    At Runtime:
    ‚Ä¢ "42" ‚Üí Single value (exact match)
    ‚Ä¢ "109.9-112.4" ‚Üí Range (min/max check)
    ‚Ä¢ Stored as plain strings, parsed on demand
    ‚Ä¢ No schema changes needed
```

---

## ‚úÖ Validation Success Cases

```
Correct Answer: "109.9-112.4"

Student Input       Parsed      Check              Result
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ     ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
"109.9"            ‚Üí 109.9      109.9 >= 109.9?    ‚úÖ PASS
                                109.9 <= 112.4?
                    
"111"              ‚Üí 111        111 >= 109.9?      ‚úÖ PASS
                                111 <= 112.4?
                    
"112.4"            ‚Üí 112.4      112.4 >= 109.9?    ‚úÖ PASS
                                112.4 <= 112.4?

"110.5"            ‚Üí 110.5      110.5 >= 109.9?    ‚úÖ PASS
                                110.5 <= 112.4?
```

---

## ‚ùå Validation Failure Cases

```
Correct Answer: "109.9-112.4"

Student Input       Parsed      Check              Result
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ     ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
"109.8"            ‚Üí 109.8      109.8 >= 109.9?    ‚ùå FAIL
                                (NO)
                    
"113"              ‚Üí 113        113 <= 112.4?      ‚ùå FAIL
                                (NO)

"abc"              ‚Üí NaN        Invalid input      ‚ùå FAIL

""                 ‚Üí null       Empty input        ‚ùå FAIL
```

---

## üéØ Summary

```
                    Single Value
                    vs
                    Range Detection
                          ‚îÇ
                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                ‚îÇ                   ‚îÇ
            Contains "-"           No "-"
                ‚îÇ                   ‚îÇ
                ‚Üì                   ‚Üì
        Try Range Parse      Try Single Value
                ‚îÇ                   ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
        ‚îÇ               ‚îÇ          ‚îÇ
    Success        Fail  ‚îÇ        Success
        ‚îÇ           ‚îÇ    ‚îÇ          ‚îÇ
        ‚Üì           ‚Üì    ‚Üì          ‚Üì
    Range       Return  ‚îÇ      Single
    Validation  null    ‚îÇ      Value
        ‚îÇ           ‚îÇ    ‚îÇ      Validation
        ‚îÇ           ‚îÇ    ‚Üì          ‚îÇ
        ‚îÇ           ‚îî‚îÄ‚îÄ‚Üí ‚ùå         ‚îÇ
        ‚îÇ              INVALID      ‚îÇ
        ‚îÇ                           ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚îÇ
                    ‚Üì
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ ‚úÖ Validation Result ‚îÇ
        ‚îÇ (true or false)      ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

This comprehensive system ensures accurate and flexible NAT answer validation! üéØ
